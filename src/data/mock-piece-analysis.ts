import type { PieceAnalysis, PiecePracticeData, MeasureProgress } from "@/types/piece";

// 쇼팽 발라드 1번 분석 데이터
export const chopinBallade1Analysis: PieceAnalysis = {
  pieceId: "piece_001",
  totalMeasures: 264,
  estimatedDuration: 600, // 10분
  overallDifficulty: "very_hard",
  keySignature: "G minor",
  timeSignature: "6/4",
  form: "자유로운 소나타 형식",
  sections: [
    {
      measureNumber: 1,
      startMeasure: 1,
      endMeasure: 8,
      sectionName: "서주 (Largo)",
      technicalDifficulty: "medium",
      techniques: ["아르페지오", "레가토"],
      suggestedTempo: { min: 40, max: 50, practice: 35 },
      rhythmPattern: "6/4",
      dynamics: "p",
      expression: ["sotto voce", "misterioso"],
      practiceNotes: "신비로운 분위기를 살리며 천천히 시작하세요. 왼손 반주가 오른손 멜로디를 방해하지 않도록 가볍게 터치합니다.",
    },
    {
      measureNumber: 9,
      startMeasure: 9,
      endMeasure: 36,
      sectionName: "제1주제",
      technicalDifficulty: "hard",
      techniques: ["멜로디 강조", "레가토", "루바토"],
      suggestedTempo: { min: 90, max: 120, practice: 70 },
      rhythmPattern: "6/4",
      dynamics: "mp",
      expression: ["con espressione", "dolce"],
      practiceNotes: "서정적인 멜로디를 노래하듯이 연주하세요. 오른손 4, 5번 손가락의 멜로디 라인을 또렷하게 들리게 합니다.",
    },
    {
      measureNumber: 37,
      startMeasure: 37,
      endMeasure: 67,
      sectionName: "경과구 & 제2주제",
      technicalDifficulty: "hard",
      techniques: ["크로매틱", "옥타브", "빠른 패시지"],
      suggestedTempo: { min: 100, max: 130, practice: 80 },
      rhythmPattern: "6/4",
      dynamics: "mf",
      expression: ["agitato", "crescendo"],
      practiceNotes: "점차 고조되는 긴장감을 표현하세요. 옥타브 패시지는 손목을 유연하게 유지합니다.",
    },
    {
      measureNumber: 68,
      startMeasure: 68,
      endMeasure: 93,
      sectionName: "제2주제 (왈츠)",
      technicalDifficulty: "medium",
      techniques: ["왈츠 리듬", "레가토"],
      suggestedTempo: { min: 110, max: 140, practice: 90 },
      rhythmPattern: "6/4",
      dynamics: "p",
      expression: ["grazioso", "leggiero"],
      practiceNotes: "우아한 왈츠 느낌을 살리세요. 첫 박에 살짝 강세를 주고 2, 3박은 가볍게 처리합니다.",
    },
    {
      measureNumber: 94,
      startMeasure: 94,
      endMeasure: 125,
      sectionName: "발전부 1",
      technicalDifficulty: "very_hard",
      techniques: ["옥타브", "빠른 스케일", "폴리리듬"],
      suggestedTempo: { min: 120, max: 150, practice: 90 },
      rhythmPattern: "6/4",
      dynamics: "f",
      expression: ["con fuoco", "appassionato"],
      practiceNotes: "격정적인 표현이 필요한 구간입니다. 왼손 옥타브를 정확하게 연습한 후 템포를 올리세요.",
    },
    {
      measureNumber: 126,
      startMeasure: 126,
      endMeasure: 165,
      sectionName: "발전부 2 (클라이맥스)",
      technicalDifficulty: "very_hard",
      techniques: ["옥타브 글리산도", "fff 포르테", "점프"],
      suggestedTempo: { min: 130, max: 160, practice: 100 },
      rhythmPattern: "6/4",
      dynamics: "ff",
      expression: ["grandioso", "con bravura"],
      practiceNotes: "곡의 클라이맥스입니다. 체력 안배가 중요합니다. 손목과 팔 전체를 사용해 큰 소리를 내세요.",
    },
    {
      measureNumber: 166,
      startMeasure: 166,
      endMeasure: 207,
      sectionName: "재현부",
      technicalDifficulty: "hard",
      techniques: ["주제 재현", "변주"],
      suggestedTempo: { min: 100, max: 130, practice: 85 },
      rhythmPattern: "6/4",
      dynamics: "mf",
      expression: ["espressivo"],
      practiceNotes: "제시부의 주제가 변형되어 돌아옵니다. 처음과 다른 뉘앙스로 연주하세요.",
    },
    {
      measureNumber: 208,
      startMeasure: 208,
      endMeasure: 264,
      sectionName: "코다 (Presto con fuoco)",
      technicalDifficulty: "very_hard",
      techniques: ["빠른 옥타브", "스케일", "아르페지오"],
      suggestedTempo: { min: 160, max: 180, practice: 120 },
      rhythmPattern: "6/4",
      dynamics: "ff",
      expression: ["presto con fuoco", "brillante"],
      practiceNotes: "극적인 마무리입니다. 손가락 독립성과 지구력이 필요합니다. 느린 템포에서 완벽히 익힌 후 속도를 올리세요.",
    },
  ],
  practiceRecommendations: [
    "매일 코다 부분만 별도로 20분씩 연습하세요",
    "옥타브 패시지는 손목 회전을 활용하세요",
    "서주부터 끝까지 한 번에 치기보다 섹션별로 나눠서 연습하세요",
    "루바토를 자연스럽게 하되, 왼손 베이스는 흔들리지 않게 유지하세요",
  ],
  commonMistakes: [
    "코다에서 너무 일찍 지쳐서 마무리가 약해지는 경우",
    "발전부에서 템포가 불안정해지는 경우",
    "제2주제의 왈츠 리듬이 딱딱해지는 경우",
  ],
  analyzedAt: "2026-02-11T10:00:00Z",
};

// 베토벤 비창 분석 데이터
export const beethovenPathetiqueAnalysis: PieceAnalysis = {
  pieceId: "piece_002",
  totalMeasures: 310,
  estimatedDuration: 1080, // 18분 (3악장 전체)
  overallDifficulty: "hard",
  keySignature: "C minor",
  timeSignature: "4/4",
  form: "소나타 형식 (3악장)",
  sections: [
    {
      measureNumber: 1,
      startMeasure: 1,
      endMeasure: 10,
      sectionName: "1악장 서주 (Grave)",
      technicalDifficulty: "hard",
      techniques: ["화음", "점리듬", "장식음"],
      suggestedTempo: { min: 40, max: 50, practice: 35 },
      rhythmPattern: "4/4",
      dynamics: "ff",
      expression: ["grave", "con espressione"],
      practiceNotes: "웅장하고 비장한 분위기를 표현하세요. 점리듬을 정확하게 연주하는 것이 중요합니다.",
    },
    {
      measureNumber: 11,
      startMeasure: 11,
      endMeasure: 50,
      sectionName: "1악장 제시부",
      technicalDifficulty: "hard",
      techniques: ["빠른 스케일", "트레몰로"],
      suggestedTempo: { min: 130, max: 160, practice: 100 },
      rhythmPattern: "4/4",
      dynamics: "f",
      expression: ["allegro molto e con brio"],
      practiceNotes: "왼손 트레몰로 위에 오른손 멜로디를 명확하게 표현하세요.",
    },
    {
      measureNumber: 51,
      startMeasure: 51,
      endMeasure: 100,
      sectionName: "2악장 (Adagio cantabile)",
      technicalDifficulty: "medium",
      techniques: ["레가토", "노래하는 터치"],
      suggestedTempo: { min: 50, max: 65, practice: 45 },
      rhythmPattern: "2/4",
      dynamics: "p",
      expression: ["cantabile", "dolce"],
      practiceNotes: "서정적인 멜로디를 노래하듯이 연주하세요. 가장 유명한 악장입니다.",
    },
    {
      measureNumber: 101,
      startMeasure: 101,
      endMeasure: 210,
      sectionName: "3악장 론도",
      technicalDifficulty: "hard",
      techniques: ["빠른 패시지", "스타카토"],
      suggestedTempo: { min: 110, max: 140, practice: 90 },
      rhythmPattern: "4/4",
      dynamics: "mf",
      expression: ["allegro"],
      practiceNotes: "경쾌하면서도 비극적인 분위기를 살리세요.",
    },
  ],
  practiceRecommendations: [
    "2악장 멜로디 라인을 별도로 노래하면서 연습하세요",
    "1악장 서주의 점리듬을 메트로놈과 함께 정확히 연습하세요",
    "3악장은 가벼운 터치로 손가락 독립성을 기르세요",
  ],
  commonMistakes: [
    "1악장 서주가 너무 빨라지는 경우",
    "2악장에서 멜로디가 반주에 묻히는 경우",
    "3악장 론도 주제가 지저분해지는 경우",
  ],
  analyzedAt: "2026-02-11T10:00:00Z",
};

// 드뷔시 달빛 분석 데이터
export const debussyClairDeLuneAnalysis: PieceAnalysis = {
  pieceId: "piece_003",
  totalMeasures: 72,
  estimatedDuration: 300, // 5분
  overallDifficulty: "medium",
  keySignature: "D-flat major",
  timeSignature: "9/8",
  form: "3부 형식",
  sections: [
    {
      measureNumber: 1,
      startMeasure: 1,
      endMeasure: 14,
      sectionName: "A부분 (서정적 주제)",
      technicalDifficulty: "medium",
      techniques: ["페달링", "pp 터치"],
      suggestedTempo: { min: 50, max: 65, practice: 45 },
      rhythmPattern: "9/8",
      dynamics: "pp",
      expression: ["andante très expressif", "con sordino"],
      practiceNotes: "부드럽고 몽환적인 분위기를 만드세요. 페달은 하프 페달을 적극 활용합니다.",
    },
    {
      measureNumber: 15,
      startMeasure: 15,
      endMeasure: 26,
      sectionName: "전개부",
      technicalDifficulty: "medium",
      techniques: ["아르페지오", "루바토"],
      suggestedTempo: { min: 55, max: 70, practice: 50 },
      rhythmPattern: "9/8",
      dynamics: "p",
      expression: ["poco mosso"],
      practiceNotes: "왼손 아르페지오가 자연스럽게 흐르도록 연습하세요.",
    },
    {
      measureNumber: 27,
      startMeasure: 27,
      endMeasure: 42,
      sectionName: "B부분 (클라이맥스)",
      technicalDifficulty: "hard",
      techniques: ["빠른 아르페지오", "크레센도"],
      suggestedTempo: { min: 60, max: 75, practice: 55 },
      rhythmPattern: "9/8",
      dynamics: "mf",
      expression: ["en animant", "più cresc."],
      practiceNotes: "곡의 정점입니다. 점진적인 크레센도로 클라이맥스를 만드세요.",
    },
    {
      measureNumber: 43,
      startMeasure: 43,
      endMeasure: 72,
      sectionName: "A' 부분 (재현)",
      technicalDifficulty: "medium",
      techniques: ["pp 마무리", "페달"],
      suggestedTempo: { min: 45, max: 60, practice: 42 },
      rhythmPattern: "9/8",
      dynamics: "pp",
      expression: ["tempo primo", "morendo"],
      practiceNotes: "처음 주제가 돌아옵니다. 더욱 섬세하게 마무리하세요.",
    },
  ],
  practiceRecommendations: [
    "페달 테크닉을 집중적으로 연습하세요 (하프 페달, 플러터 페달)",
    "9/8박자의 흐름을 자연스럽게 느끼세요",
    "인상주의 음악의 색채감을 표현하는 것이 핵심입니다",
  ],
  commonMistakes: [
    "페달을 너무 많이 밟아 소리가 뭉개지는 경우",
    "템포가 너무 느려져서 흐름이 끊기는 경우",
    "클라이맥스 부분에서 갑자기 소리가 거칠어지는 경우",
  ],
  analyzedAt: "2026-02-11T10:00:00Z",
};

// 리스트 라 캄파넬라 분석 데이터
export const lisztLaCampanellaAnalysis: PieceAnalysis = {
  pieceId: "piece_004",
  totalMeasures: 185,
  estimatedDuration: 300, // 5분
  overallDifficulty: "very_hard",
  keySignature: "G-sharp minor",
  timeSignature: "6/8",
  form: "연습곡 형식",
  sections: [
    {
      measureNumber: 1,
      startMeasure: 1,
      endMeasure: 24,
      sectionName: "도입부 (종소리 주제)",
      technicalDifficulty: "very_hard",
      techniques: ["점프", "트릴", "높은 음역"],
      suggestedTempo: { min: 100, max: 130, practice: 70 },
      rhythmPattern: "6/8",
      dynamics: "p",
      expression: ["allegretto", "leggiero"],
      practiceNotes: "종소리를 모방하는 높은 음역의 점프가 핵심입니다. 손가락을 높이 들지 말고 최소한의 움직임으로 정확하게 착지하세요.",
    },
    {
      measureNumber: 25,
      startMeasure: 25,
      endMeasure: 60,
      sectionName: "주제 변주 1",
      technicalDifficulty: "very_hard",
      techniques: ["빠른 패시지", "도약", "크로스핸드"],
      suggestedTempo: { min: 110, max: 140, practice: 80 },
      rhythmPattern: "6/8",
      dynamics: "mf",
      expression: ["animato"],
      practiceNotes: "오른손 멜로디와 점프를 동시에 처리하는 것이 어렵습니다. 느린 템포에서 정확도를 먼저 확보하세요.",
    },
    {
      measureNumber: 61,
      startMeasure: 61,
      endMeasure: 100,
      sectionName: "주제 변주 2",
      technicalDifficulty: "very_hard",
      techniques: ["트레몰로", "옥타브 트릴"],
      suggestedTempo: { min: 120, max: 150, practice: 90 },
      rhythmPattern: "6/8",
      dynamics: "f",
      expression: ["più mosso", "brillante"],
      practiceNotes: "지구력이 필요한 구간입니다. 손목을 릴랙스하게 유지하세요.",
    },
    {
      measureNumber: 101,
      startMeasure: 101,
      endMeasure: 140,
      sectionName: "중간부 (서정적)",
      technicalDifficulty: "hard",
      techniques: ["레가토 멜로디", "반주 패턴"],
      suggestedTempo: { min: 90, max: 120, practice: 75 },
      rhythmPattern: "6/8",
      dynamics: "p",
      expression: ["dolce", "cantando"],
      practiceNotes: "기교적인 구간 사이의 휴식 같은 부분입니다. 서정적으로 노래하세요.",
    },
    {
      measureNumber: 141,
      startMeasure: 141,
      endMeasure: 185,
      sectionName: "코다 (화려한 마무리)",
      technicalDifficulty: "very_hard",
      techniques: ["빠른 옥타브 글리산도", "점프", "fff"],
      suggestedTempo: { min: 140, max: 170, practice: 100 },
      rhythmPattern: "6/8",
      dynamics: "ff",
      expression: ["vivace", "con bravura"],
      practiceNotes: "화려한 마무리입니다. 체력을 아껴두었다가 이 부분에서 폭발시키세요.",
    },
  ],
  practiceRecommendations: [
    "점프 연습: 눈을 감고 건반 위치를 익히세요",
    "트릴은 4-5번 손가락으로도 균일하게 나오도록 연습하세요",
    "매일 조금씩, 절대 무리하지 마세요 (부상 위험)",
    "손목 스트레칭을 충분히 하세요",
  ],
  commonMistakes: [
    "높은 음역 점프에서 틀리는 경우",
    "트릴이 불균일해지는 경우",
    "중간에 지쳐서 마무리가 약해지는 경우",
    "너무 빨리 연주하려다 정확도가 떨어지는 경우",
  ],
  analyzedAt: "2026-02-11T10:00:00Z",
};

// 쇼팽 즉흥환상곡 분석 데이터
export const chopinFantaisieAnalysis: PieceAnalysis = {
  pieceId: "piece_005",
  totalMeasures: 180,
  estimatedDuration: 300, // 5분
  overallDifficulty: "hard",
  keySignature: "C-sharp minor",
  timeSignature: "4/4",
  form: "3부 형식 + 코다",
  sections: [
    {
      measureNumber: 1,
      startMeasure: 1,
      endMeasure: 40,
      sectionName: "A부분 (Allegro agitato)",
      technicalDifficulty: "hard",
      techniques: ["빠른 16분음표", "폴리리듬 (4:3)"],
      suggestedTempo: { min: 140, max: 170, practice: 100 },
      rhythmPattern: "4/4",
      dynamics: "f",
      expression: ["allegro agitato", "con fuoco"],
      practiceNotes: "오른손 4개 음표와 왼손 3개 음표가 동시에 진행됩니다. 먼저 손별로 연습하세요.",
    },
    {
      measureNumber: 41,
      startMeasure: 41,
      endMeasure: 82,
      sectionName: "B부분 (Largo)",
      technicalDifficulty: "medium",
      techniques: ["레가토 멜로디", "넓은 화음"],
      suggestedTempo: { min: 50, max: 70, practice: 45 },
      rhythmPattern: "4/4",
      dynamics: "p",
      expression: ["largo", "cantabile"],
      practiceNotes: "'I'm Always Chasing Rainbows'의 원곡입니다. 아름다운 멜로디를 노래하세요.",
    },
    {
      measureNumber: 83,
      startMeasure: 83,
      endMeasure: 140,
      sectionName: "A' 부분 (재현)",
      technicalDifficulty: "hard",
      techniques: ["빠른 패시지", "폴리리듬"],
      suggestedTempo: { min: 140, max: 170, practice: 100 },
      rhythmPattern: "4/4",
      dynamics: "f",
      expression: ["agitato"],
      practiceNotes: "A부분이 재현됩니다. 더욱 격정적으로 연주하세요.",
    },
    {
      measureNumber: 141,
      startMeasure: 141,
      endMeasure: 180,
      sectionName: "코다",
      technicalDifficulty: "very_hard",
      techniques: ["빠른 스케일", "화려한 마무리"],
      suggestedTempo: { min: 150, max: 180, practice: 110 },
      rhythmPattern: "4/4",
      dynamics: "ff",
      expression: ["presto", "brillante"],
      practiceNotes: "화려한 마무리입니다. 마지막 화음까지 정확하게 연주하세요.",
    },
  ],
  practiceRecommendations: [
    "폴리리듬(4:3)을 메트로놈 없이도 자연스럽게 느끼도록 연습하세요",
    "B부분 멜로디를 노래로 불러보세요",
    "빠른 부분은 스타카토로 먼저 연습한 후 레가토로 연결하세요",
  ],
  commonMistakes: [
    "폴리리듬이 어긋나는 경우",
    "빠른 부분에서 음이 뭉개지는 경우",
    "B부분이 너무 느려지거나 지루해지는 경우",
  ],
  analyzedAt: "2026-02-11T10:00:00Z",
};

// 전체 분석 데이터 모음
export const allPieceAnalyses: PieceAnalysis[] = [
  chopinBallade1Analysis,
  beethovenPathetiqueAnalysis,
  debussyClairDeLuneAnalysis,
  lisztLaCampanellaAnalysis,
  chopinFantaisieAnalysis,
];

// 곡 ID로 분석 데이터 찾기
export function getPieceAnalysisById(pieceId: string): PieceAnalysis | undefined {
  return allPieceAnalyses.find((a) => a.pieceId === pieceId);
}

// Mock 연습 데이터
export const mockPracticeDatas: PiecePracticeData[] = [
  {
    pieceId: "piece_001",
    userId: "user_001",
    totalPracticeTime: 7200, // 2시간
    sessionCount: 8,
    lastPracticedAt: "2026-02-11T09:30:00Z",
    averageAccuracy: 75,
    completionPercentage: 45,
    measureProgress: [
      { measureStart: 1, measureEnd: 36, practiceCount: 15, practiceTime: 1800, mastery: "practicing", lastPracticedAt: "2026-02-11T09:30:00Z" },
      { measureStart: 37, measureEnd: 93, practiceCount: 10, practiceTime: 1200, mastery: "learning", lastPracticedAt: "2026-02-10T10:00:00Z" },
      { measureStart: 94, measureEnd: 165, practiceCount: 5, practiceTime: 900, mastery: "learning", lastPracticedAt: "2026-02-09T15:00:00Z" },
      { measureStart: 166, measureEnd: 207, practiceCount: 3, practiceTime: 600, mastery: "not_started" },
      { measureStart: 208, measureEnd: 264, practiceCount: 20, practiceTime: 2700, mastery: "practicing", lastPracticedAt: "2026-02-11T09:00:00Z" },
    ],
  },
  {
    pieceId: "piece_003",
    userId: "user_001",
    totalPracticeTime: 3600, // 1시간
    sessionCount: 5,
    lastPracticedAt: "2026-02-10T20:00:00Z",
    averageAccuracy: 85,
    completionPercentage: 70,
    measureProgress: [
      { measureStart: 1, measureEnd: 26, practiceCount: 12, practiceTime: 1500, mastery: "mastered", lastPracticedAt: "2026-02-10T20:00:00Z" },
      { measureStart: 27, measureEnd: 42, practiceCount: 8, practiceTime: 1200, mastery: "practicing", lastPracticedAt: "2026-02-10T19:30:00Z" },
      { measureStart: 43, measureEnd: 72, practiceCount: 5, practiceTime: 900, mastery: "learning", lastPracticedAt: "2026-02-09T18:00:00Z" },
    ],
  },
];

// 유저의 곡별 연습 데이터 조회
export function getUserPracticeData(userId: string, pieceId: string): PiecePracticeData | undefined {
  return mockPracticeDatas.find((p) => p.userId === userId && p.pieceId === pieceId);
}

// 유저의 모든 연습 데이터 조회
export function getAllUserPracticeData(userId: string): PiecePracticeData[] {
  return mockPracticeDatas.filter((p) => p.userId === userId);
}
